# Мониторинг

Ordinaut разработан для производственных сред и предоставляет ключевые метрики для мониторинга и оповещения. Полный стек наблюдаемости можно запустить с помощью файла `docker-compose.observability.yml`.

## Метрики Prometheus

Система предоставляет эндпоинт, совместимый с Prometheus, по адресу `/metrics`. Ключевые метрики включают:

- `orchestrator_tasks_created_total`: Счетчик созданных задач.
- `orchestrator_runs_total`: Счетчик запусков задач с метками по статусу.
- `orchestrator_task_duration_seconds`: Гистограмма времени выполнения задач.
- `orchestrator_due_work_queue_depth`: Датчик, показывающий количество ожидающих заданий.
- `orchestrator_http_request_duration_seconds`: Гистограмма задержки ответа API.

## Панели мониторинга Grafana

Рекомендуется настроить панели мониторинга Grafana для визуализации этих метрик. Предоставленный стек наблюдаемости включает предварительно настроенный экземпляр Grafana.

## Логирование

Все сервисы создают структурированные журналы (JSON) с идентификаторами корреляции (`task_id`, `run_id`). Предоставленный стек наблюдаемости включает **Loki** для централизованного сбора логов.