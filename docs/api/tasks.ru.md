# API Задач (Tasks)

API Задач — это основной интерфейс для создания, управления и мониторинга автоматизированных рабочих процессов.

## `POST /tasks`

Создает новую запланированную задачу.

| Поле                  | Тип     | Обязат.  | Описание                                                                       |
|:----------------------|:--------|:---------|:-------------------------------------------------------------------------------|
| `title`               | string  | Да       | Человекочитаемый заголовок задачи.                                             |
| `description`         | string  | Да       | Более подробное описание того, что делает задача.                               |
| `schedule_kind`       | string  | Да       | Тип расписания: `cron`, `rrule`, `once` или `event`.                             |
| `schedule_expr`       | string  | Услов.   | Выражение расписания (например, строка cron, RRULE). Требуется для всех, кроме `event`. |
| `timezone`            | string  | Нет      | Часовой пояс для расписания (например, `Europe/Chisinau`). По умолчанию UTC.      |
| `payload`             | object  | Да       | Определение конвейера для выполнения.                                          |
| `created_by`          | UUID    | Да       | ID агента, создающего задачу.                                                  |
| `priority`            | integer | Нет      | Приоритет от 1 до 9 (1 — самый высокий). По умолчанию 5.                         |
| `max_retries`         | integer | Нет      | Количество повторных попыток при неудачном запуске. По умолчанию 3.              |

**Пример запроса:**

```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-agent-token" \
  -d @/path/to/your/task-definition.json
```

---

## `GET /tasks`

Выводит список задач с необязательной фильтрацией.

**Параметры запроса:**
- `status`: Фильтрация по `active`, `paused` или `canceled`.
- `limit`: Количество возвращаемых результатов (по умолчанию: 50).
- `offset`: Смещение для пагинации.

---

## `GET /tasks/{id}`

Получает полную информацию о конкретной задаче по ее UUID.

---

## `POST /tasks/{id}/run_now`

Запускает немедленное, однократное выполнение задачи, минуя ее обычное расписание.

---

## `POST /tasks/{id}/pause`

Приостанавливает задачу, предотвращая любые будущие запланированные запуски до ее возобновления.

---

## `POST /tasks/{id}/resume`

Возобновляет ранее приостановленную задачу.

---

## `POST /tasks/{id}/cancel`

Окончательно отменяет задачу. Это действие не может быть отменено.
