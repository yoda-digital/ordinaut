#Аутентификация

Все эндпоинты API (за исключением публичных проверок состояния) требуют аутентификации на основе Агента с использованием **Bearer Token**.

## Аутентификация с помощью Bearer Token

Вы должны включать заголовок `Authorization` с токеном вашего агента в каждый запрос. Токен должен иметь префикс `Bearer `.

```bash
curl -H "Authorization: Bearer 00000000-0000-0000-0000-000000000001" \
     https://api.orchestrator.example.com/v1/tasks
```

## Области действия и разрешения агента

Аутентификация привязана к конкретному **Агенту**, у которого есть набор **областей действия (scopes)**, предоставляющих ему разрешение на выполнение определенных действий. Например, у агента может быть область действия `tasks:create`, но не `tasks:cancel`.

Если агент попытается выполнить действие за пределами разрешенных ему областей, API вернет ошибку `403 Forbidden`.

### Общие области действия

- `tasks:create`, `tasks:read`, `tasks:update`, `tasks:delete`
- `runs:read`
- `events:publish`
- `admin` (предоставляет доступ ко всем операциям)

## Ответы об ошибках

- `401 Unauthorized`: Возвращается, если заголовок `Authorization` отсутствует или токен недействителен, искажен или просрочен.
- `403 Forbidden`: Возвращается, если токен агента действителен, но у него отсутствуют необходимые области действия для запрошенной операции.

