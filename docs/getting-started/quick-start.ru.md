# Краткое руководство

Это руководство проведет вас через создание, планирование и проверку вашего первого автоматизированного рабочего процесса с помощью Ordinaut. Мы создадим задачу, которая запускает простой конвейер каждую минуту.

## Предварительные требования: Запуск системы

Перед созданием вашей первой задачи вам нужна работающая система Ordinaut. Следуйте [Руководству по установке](installation.md), чтобы начать.

---

## 1. Определите задачу

Сначала создайте JSON-файл с именем `my_first_task.json`. Этот файл определяет все о задаче: ее имя, расписание и конвейер для выполнения.

```json
{
  "title": "Моя первая автоматизированная задача",
  "description": "Простая задача, которая запускается каждую минуту.",
  "schedule_kind": "cron",
  "schedule_expr": "* * * * *",
  "timezone": "Europe/Chisinau",
  "payload": {
    "params": {
      "user_name": "Пользователь Ordinaut"
    },
    "pipeline": [
      {
        "id": "get_data",
        "uses": "debug.echo",
        "with": {
          "message": "Привет, ${params.user_name}!",
          "details": {
            "timestamp": "${now}"
          }
        },
        "save_as": "greeting"
      },
      {
        "id": "process_data",
        "uses": "debug.log",
        "with": {
          "message": "Шаг 1 сказал: '${steps.greeting.message}' в ${steps.greeting.details.timestamp}"
        }
      }
    ]
  },
  "created_by": "00000000-0000-0000-0000-000000000001"
}
```

## 2. Создайте задачу через API

Когда сервисы Ordinaut запущены, используйте `curl` для отправки определения вашей задачи в API.

```bash
curl -X POST http://localhost:8080/tasks \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-agent-token" \
  -d @my_first_task.json
```

API ответит уникальным идентификатором вашей новой задачи. **Скопируйте этот ID задачи**.

## 3. Проверьте выполнение

Поскольку задача запланирована на запуск каждую минуту, вы можете наблюдать историю ее выполнения почти сразу.

### Проверьте историю запусков

Подождите минуту, затем используйте эндпоинт `runs`. Замените `{task-id}` на скопированный вами ID.

```bash
curl "http://localhost:8080/runs?task_id={task-id}&limit=5"
```

### Проверьте журналы воркера

Вы также можете увидеть выполнение в реальном времени в журналах воркера.

```bash
docker compose logs -f worker
```

---

Поздравляем! Вы успешно создали и проверили повторяющийся автоматизированный рабочий процесс.